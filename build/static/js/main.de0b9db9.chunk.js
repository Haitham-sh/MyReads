(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),s=n(11),a=n.n(s),r=(n(16),n(9)),i=n(4),l=(n(17),n(2)),d=n(5),u=n(1);var h=function(e){var t,n,c=e.book,o=e.updateShelf,s=e.shelfedOrNot;return Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[Object(u.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(null===(t=c.imageLinks)||void 0===t?void 0:t.thumbnail,"), linear-gradient(120deg, #d4fc79 0%, #96e6a1 100%)")}}),Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{value:s(c),onChange:function(e){o(c,e.target.value)},children:[Object(u.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(u.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(u.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(u.jsx)("option",{value:"read",children:"Read"}),Object(u.jsx)("option",{value:"none",children:"None"})]})})]}),Object(u.jsx)("div",{className:"book-title",children:c.title}),Object(u.jsx)("div",{className:"book-authors",children:null===(n=c.authors)||void 0===n?void 0:n.map((function(e){return Object(u.jsxs)("span",{children:[e,","]},e)}))})]})};var j=function(e){var t=e.books,n=e.shelf,c=e.updateShelf,o=e.shelfedOrNot;return Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h2",{className:"bookshelf-title",children:n.value}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:t.filter((function(e){return e.shelf===n.name})).map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(h,{book:e,updateShelf:c,shelfedOrNot:o})},e.id)}))})})]})};var b=function(e){var t=e.updateShelf,n=e.shelfedOrNot,c=e.books;return Object(u.jsx)("div",{className:"app",children:Object(u.jsxs)("div",{className:"list-books",children:[Object(u.jsx)("div",{className:"list-books-title",children:Object(u.jsx)("h1",{children:"MyReads"})}),Object(u.jsx)("div",{className:"list-books-content",children:Object(u.jsx)("div",{children:[{value:"Currently Reading",name:"currentlyReading"},{value:"Want to Read",name:"wantToRead"},{value:"Read",name:"read"}].map((function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(j,{books:c,shelf:e,updateShelf:t,shelfedOrNot:n})},e.name)}))})}),Object(u.jsx)("div",{className:"open-search",children:Object(u.jsx)(d.b,{to:"/search",children:"Add a book"})})]})})},f=n(8),O="https://reactnd-books-api.udacity.com",v=localStorage.token;v||(v=localStorage.token=Math.random().toString(36).substr(-8));var m={Accept:"application/json",Authorization:v};var x=function(e){var t=e.updateShelf,n=e.shelfedOrNot,o=e.booksx,s=Object(c.useState)(""),a=Object(i.a)(s,2),l=a[0],j=a[1],b=Object(c.useState)([]),v=Object(i.a)(b,2),x=v[0],p=v[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){0!==l.trim().length?function(e,t){return fetch("".concat(O,"/search"),{method:"POST",headers:Object(f.a)(Object(f.a)({},m),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(l.trim()).then((function(e){if("empty query"!==e.error){var t=[];e.map((function(e){return e.shelf="none"})),o.map((function(n){return t[e.findIndex((function(e){return e.id===n.id}))]={id:n.id,shelf:n.shelf},t})),e.map((function(n){return t.map((function(e){return n.id===e.id&&(n.shelf=e.shelf),n})),e})),p(Object(r.a)(e))}else p([]),alert("Sorry a Book Not Found")})):p([])}),350);return function(){return clearTimeout(e)}}),[l,o]),Object(u.jsxs)("div",{className:"search-books",children:[Object(u.jsxs)("div",{className:"search-books-bar",children:[Object(u.jsx)(d.b,{to:"/",className:"close-search",children:"Close"}),Object(u.jsx)("div",{className:"search-books-input-wrapper",children:Object(u.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:l,onChange:function(e){return j(e.target.value)}})})]}),Object(u.jsx)("div",{className:"search-books-results",children:Object(u.jsx)("ol",{className:"books-grid",children:x.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(h,{book:e,updateShelf:t,shelfedOrNot:n})},e.id)}))})})]})};var p=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1];Object(c.useEffect)((function(){fetch("".concat(O,"/books"),{headers:m}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){o(e)}))}),[]);var s=function(e,t){(function(e,t){return fetch("".concat(O,"/books/").concat(e.id),{method:"PUT",headers:Object(f.a)(Object(f.a)({},m),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))})(e,t).then((function(){e.shelf=t;var c=n.filter((function(t){return t.id!==e.id})).concat([e]);o(Object(r.a)(c))}))},a=function(e){var t=n.filter((function(t){return t.id===e.id}));return t.length>0?t[0].shelf:"none"};return Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{exact:!0,path:"/",element:Object(u.jsx)(b,{shelfedOrNot:a,updateShelf:s,books:n})}),Object(u.jsx)(l.a,{exact:!0,path:"/search",element:Object(u.jsx)(x,{shelfedOrNot:a,updateShelf:s,booksx:n})})]})};a.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(d.a,{children:Object(u.jsx)(p,{})})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.de0b9db9.chunk.js.map